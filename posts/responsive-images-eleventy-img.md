---
title: Leveling Up Responsive Images with Eleventy Img
date: 2025-09-27
eleventyNavigation:
  key: responsive-images-eleventy-img
excerpt: |
  Walking through the fixes that led us from stretched screenshots to a lean Eleventy Img pipeline, plus a quick primer on how responsive image markup really works.
---

## The problem we started with

A reader pinged us because screenshots on small screens looked squashed, even though the assets themselves were crisp. The culprit was a pair of Markdown `<img>` tags that hard-coded only a `height="300"`. Tachyons dutifully set the width to `100%` on narrow viewports, so the browser stretched the bitmaps vertically to reach 300 pixels tall. No amount of `object-fit` sugar coats that mismatch.

We wanted a solution that would:

- Keep aspect ratios intact without manual dimensions in Markdown
- Serve smaller files to mobile devices
- Lay the groundwork for modern formats like WebP or AVIF without hand-rolling `<picture>` markup

Enter Eleventy Img.

## Why reach for `@11ty/eleventy-img`

The plugin gives you production-ready responsive images with very little ceremony:

- Generates multiple widths and formats (WebP, JPEG, AVIF when you want it) from a single source
- Compresses at build time so the browser downloads a smaller payload
- Caches the outputs and skips reruns when neither the source nor the config changed
- Emits correct markup—`<picture>`, `srcset`, `sizes`, plus width/height—to preserve intrinsic ratios and reduce layout shift
- Future-proofs the site: flipping on new formats is as simple as adding another entry to the formats array

## Shortcode vs. transform plugin

Our first pass added a Nunjucks {% raw %} `{% image %}` {% endraw %} shortcode that wrapped `eleventy-img` with sensible defaults (`widths: [320, 640, 960, 1280, 1600]`, `formats: ["webp", "jpeg"]`). Posts just had to swap `<img>` for {% raw %} `{% image %}` {% endraw %} and pass real alt text. Eleventy generated `/assets/generated/*` derivatives and dropped responsive markup straight into the page.

Later we experimented with Eleventy Img’s transform plugin, which rewrites plain `<img>` tags in HTML. The defaults colocate derivatives under `/img/` in `_site` and add a responsive `<picture>` wrapper on the fly. That is handy when authors forget to use the shortcode, but you still pay attention to the output widths so the browser does not fetch unnecessarily large files.

Either approach hinges on one core idea: your templates describe _how the image will be sized_, and Eleventy materialises the right derivatives.

## How responsive image markup works

Two attributes do the heavy lifting:

- `srcset` lists candidate files, each with a width descriptor such as `640w`.
- `sizes` tells the browser how wide the image will render in the layout. Without it, the browser assumes `100vw`, which can lead to oversized downloads.

### Classic media query syntax

```html
sizes="(max-width: 600px) 100vw, 600px"
```

Read it left to right: if the viewport is 600px wide or smaller, render the image at the full viewport width; otherwise cap it around 600px.

### Range syntax (Media Queries Level 4)

```html
sizes="(width <= 37.5em) 100vw, 37.5em"
```

The newer range syntax swaps `max-width` for math-like comparisons. Using `em` ties the breakpoint to typography (37.5em ≈ 600px at the default 16px base), which adapts gracefully if users zoom the page.

### Picking the right widths

Once you know the maximum rendered width, generate a few useful derivatives. A simple rule of thumb is 0.5×, 1×, and 2× of that max. With a 600px slot you might produce `[300, 600, 1200]`. Eleventy Img automatically drops any size larger than the source asset, so you can include generous options without worrying about blurry upscales.

When those widths land in `srcset`, the browser chooses the smallest file that still looks sharp for the current device pixel ratio and viewport width. Combined with a good `sizes` string, users download dramatically less data on phones while retina displays still get a crisp result.

## Guardrails that kept aspect ratios honest

- Always pass real alt text—Eleventy Img will throw if you forget, which saves you from shipping broken accessibility.
- Leave `width` and `height` attributes in the generated markup. They’re calculated from the derivative that Eleventy selects as the fallback and prevent layout jank.
- If a post needs art direction (say, a square crop on mobile), reach for the shortcode so you can specify per-breakpoint sources inside a `<picture>` block. The transform plugin is great for defaults but blunt for those edge cases.

## Where we landed

Our Markdown now reads:

{% raw %}
```nunjucks
{% image "/assets/social-cards.png", "Example social card generated by the Subspace Builder" %}
```
{% endraw %}

Eleventy handles the rest, emitting markup like:

```html
<picture>
  <source type="image/webp" srcset="/img/9NWum2aR9G-320.webp 320w, …">
  <img
    alt="Example social card generated by the Subspace Builder"
    src="/img/9NWum2aR9G-640.jpeg"
    width="640"
    height="336"
    sizes="(min-width: 48em) 50vw, 100vw"
    loading="lazy"
    decoding="async"
  />
</picture>
```

No more stretched screenshots, and the HTML now communicates everything the browser needs to take the optimal path. From here we can tune `sizes`, add AVIF, or teach the transform plugin to recognise hero images versus inline thumbnails.

## Recommended reading

- [MDN’s multimedia performance primer](https://developer.mozilla.org/en-US/docs/Learn_web_development/Extensions/Performance/Multimedia) – excellent grounding in `srcset`, lazy loading, and media formats.
- [Smashing Magazine: Responsive Images Done Right](https://www.smashingmagazine.com/2014/05/responsive-images-done-right-guide-picture-srcset/) – older, but still a great tour through practical `<picture>` strategies.
- [Eleventy Img documentation](https://www.11ty.dev/docs/plugins/image/) – dig into overrides like custom filename formats, `statsOnly`, or on-demand transforms during `--serve`.

If you have an existing Eleventy project, swap one hard-coded `<img>` for the shortcode, rebuild, and inspect the HTML. Seeing the generated `<picture>` markup in context is the quickest way to build intuition for how `srcset` and `sizes` cooperate.
